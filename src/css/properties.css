/*
  Garden of Manors — Properties

*/

html.multipropertyindex {
  /* =========================================================
     Layout sizing (mobile-first)
     - --gom-hdr-h can be overridden inline by JS (higher priority)
     - --gom-drawer-bar-h is 0 by default and set by the Drawer CSS
     ========================================================= */
  --gom-hdr-h: var(--header-h, 9.6rem);
  --gom-drawer-bar-h: 0px;

  /* Legacy HUD heights (used only if you keep the old fixed H2/Search) */
  --gom-prop-topbar-h: 4.4rem;
  --gom-prop-search-h: 4.4rem;

  /* Card height = viewport - header - drawer bar - HUD */
  --gom-prop-card-h: calc(100svh - var(--gom-hdr-h, 9.6rem) - var(--gom-drawer-bar-h, 0px) - var(--gom-prop-topbar-h, 0px) - var(--gom-prop-search-h, 0px));



  /* spacing del overlay */
  --gom-prop-pad-x: 5.14%;
  --gom-prop-pad-b: 5.14%;

  /* UI */
  --gom-prop-border: 1px solid rgba(255, 255, 255, .14);
  --gom-prop-glass: rgba(0, 0, 0, .58);
  --gom-prop-grad: linear-gradient(to top,
      rgba(0, 0, 0, .92) 0%,
      rgba(0, 0, 0, .55) 38%,
      rgba(0, 0, 0, .20) 70%,
      rgba(0, 0, 0, .10) 100%);
}

html.multipropertyindex body {
  background: var(--color-bg, #000) !important;
  padding-top: var(--header-h);
}

/* Full-bleed en /properties (el tema pone #content como .container) */
html.multipropertyindex #content.container {
  width: 100% !important;
  max-width: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
}

/* Mantén la estructura (para que viva el search widget), pero oculta solo el título del tema */
html.multipropertyindex #content .page-header {
  display: none !important;
  margin: 0 !important;
  padding: 0 !important;
  border: 0 !important;
  background: transparent !important;
}

html.multipropertyindex #content .page-header h1,
html.multipropertyindex #content .page-header h2 {
  display: none !important;
}


/* Quita gutters bootstrap alrededor del form */
html.multipropertyindex form[action="/properties"] {
  margin: 0 !important;
}

html.multipropertyindex form[action="/properties"]>.row {
  margin-left: 0 !important;
  margin-right: 0 !important;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

html.multipropertyindex form[action="/properties"]>.row>.col-xs-12,
html.multipropertyindex form[action="/properties"]>.row>.col-12 {
  padding-left: 0 !important;
  padding-right: 0 !important;
}

/* =========================
   TOPBAR (count + sort)
   ========================= */
html.multipropertyindex form[action="/properties"]>.row>.col-xs-12>h2,
html.multipropertyindex form[action="/properties"]>.row>.col-12>h2 {
  position: fixed !important;
  top: var(--header-h, 9.6rem) !important;
  left: 0 !important;
  right: 0 !important;
  height: var(--gom-prop-topbar-h) !important;

  margin: 0 !important;
  padding: 0 var(--gom-prop-pad-x) !important;

  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  gap: 1.2rem !important;

  background: var(--gom-prop-glass) !important;
  border-bottom: var(--gom-prop-border) !important;

  -webkit-backdrop-filter: blur(1rem);
  backdrop-filter: blur(1rem);

  z-index: 900 !important;
}

html.multipropertyindex .property-count {
  display: inline-flex !important;
  align-items: center !important;
  gap: .6rem !important;

  font-family: var(--main-font, system-ui) !important;
  font-weight: var(--fw-semibold, 600) !important;
  letter-spacing: .14em !important;
  text-transform: uppercase !important;

  font-size: clamp(1.6rem, .8vw + 2rem, 2.4rem) !important;
  opacity: .96 !important;
  color: #eee;
}

html.multipropertyindex .sort-selector {
  margin-top: 0 !important;
}

html.multipropertyindex .sort-selector .btn {
  border: 1px solid rgba(255, 255, 255, .70) !important;
  background: transparent !important;
  color: #fff !important;

  height: 3.2rem !important;
  padding: 0 1.2rem !important;

  letter-spacing: .12em !important;
  text-transform: uppercase !important;
  font-weight: var(--fw-semibold, 600) !important;
  width: calc(var(--header-btn-minw)*2 + 3rem) !important;
}

/* SEARCH BAR fijo debajo del topbar */
html.multipropertyindex #search-bar-widget {
  position: fixed !important;
  top: calc(var(--header-h, 9.6rem) + var(--gom-prop-topbar-h)) !important;
  left: 0 !important;
  right: 0 !important;

  height: var(--gom-prop-search-h) !important;
  max-height: none !important;

  margin: 0 !important;
  padding: 0 var(--gom-prop-pad-x) !important;

  display: flex !important;
  align-items: center !important;

  background: var(--gom-prop-glass) !important;
  border-bottom: var(--gom-prop-border) !important;

  -webkit-backdrop-filter: blur(1rem);
  backdrop-filter: blur(1rem);

  z-index: 895 !important;
}

/* Fuerza la fila del widget a layout en línea */
html.multipropertyindex #search-bar-widget.row.search-bar {
  width: 100% !important;
  margin: 0 !important;
  display: flex !important;
  flex-wrap: nowrap !important;
  gap: 0 !important;
  align-items: center !important;
}

html.multipropertyindex #search-bar-widget.row.search-bar .col-sm-5 {
  width: 100%;
}

html.multipropertyindex #search-bar-widget .search-bar-field {
  flex: 1 1 0 !important;
  padding: 0 !important;
  height: auto !important;
  display: flex !important;
  align-items: center !important;
}

html.multipropertyindex #search-bar-widget .search-bar-button {
  flex: 0 0 auto !important;
  padding: 0 !important;
}

html.multipropertyindex #ArrivalDate,
html.multipropertyindex #DepartureDate,
html.multipropertyindex .search-bar .form-control {
  background: rgba(0, 0, 0, .35) !important;
  color: #fff !important;
  border: 1px solid rgba(255, 255, 255, .22) !important;
  border-radius: 0 !important;
  height: 3.2rem !important;
}

html.multipropertyindex #ArrivalDate::placeholder,
html.multipropertyindex #DepartureDate::placeholder {
  color: rgba(255, 255, 255, .75) !important;
}

html.multipropertyindex .search-bar .input-group.date .input-group-btn .btn {
  background: transparent !important;
  border: 0 !important;
  height: 3.2rem !important;
}

html.multipropertyindex i.fa.fa-calendar {
  color: #fff !important;
  opacity: .92 !important;
}

/*Rev*/
html.multipropertyindex #search-bar-widget .search-bar-button .btn {
  height: 3.2rem !important;
  width: calc(var(--header-btn-minw)*2 + 3rem) !important;
  border-radius: 0 !important;
  border: 1px solid rgba(255, 255, 255, .78) !important;
  background: rgba(0, 0, 0, .25) !important;
  color: #fff !important;
  letter-spacing: .14em !important;
  text-transform: uppercase !important;
}

html.multipropertyindex #search-bar-widget .search-bar-button .btn:hover {
  background: rgba(255, 255, 255, .92) !important;
  color: #000 !important;
}

/*end rev*/
html.multipropertyindex .search-bar .search-bar-field .input-group.date .input-group-btn {
  padding-right: .3rem;
}

/* =========================
   LIST + CARDS
   ========================= */
html.multipropertyindex .property-result-list {
  margin: 0 !important;
}

/* <hr> rompe el layout full-screen: fuera */
html.multipropertyindex .property-result-list>hr {
  display: none !important;
}

/* Card = 1 viewport */
html.multipropertyindex .property-result-list .row {
  position: relative !important;

  margin: 0 !important;
  overflow: hidden !important;

  background: #000 !important;
}

/* Imagen como "poster" */
html.multipropertyindex .property-result-list .col-sm-4 {
  position: absolute !important;
  inset: 0 !important;
  z-index: 1 !important;

  width: 100% !important;
  height: 100% !important;

  padding: 0 !important;
  margin: 0 !important;
}

html.multipropertyindex .property-result-list a.thumbnail {
  position: absolute !important;
  inset: 0 !important;

  width: 100% !important;
  height: 100% !important;

  margin: 0 !important;
  border: 0 !important;
  border-radius: 0 !important;
  overflow: hidden !important;
  background: transparent !important;
}

html.multipropertyindex .property-result-list a.thumbnail img.media-object,
html.multipropertyindex .property-result-list a.thumbnail img {
  width: 100% !important;
  height: 100% !important;
  display: block !important;

  object-fit: cover !important;
  object-position: center !important;

  /* look premium: un poco de contraste sin “ensuciar” */
  filter: saturate(1.05) contrast(1.05) !important;
  transform: scale(1.02);
  /* evita bordes en algunos browsers */
}

/* Overlay gradient */
html.multipropertyindex .property-result-list .row::after {
  content: "" !important;
  position: absolute !important;
  inset: 0 !important;
  z-index: 2 !important;
  background: var(--gom-prop-grad) !important;
  pointer-events: none !important;
}

/* Capa de contenido superpuesta */
html.multipropertyindex .property-result-list .col-sm-8 {
  position: absolute !important;
  inset: 0 !important;
  z-index: 3 !important;

  width: 100% !important;
  height: 100% !important;

  padding: 0 var(--gom-prop-pad-x) 0 var(--gom-prop-pad-b) !important;
  margin: 0 !important;

  display: flex !important;
  flex-direction: column !important;
  justify-content: flex-end !important;

  color: #fff !important;
}

/* Evita títulos duplicados: usamos el H2 “hidden-xs” como fuente única */
html.multipropertyindex .property-result-list h2.visible-xs.media-heading {
  display: none !important;
}

/* Title (desktop + lo forzamos en móvil) */
html.multipropertyindex .property-result-list h2.media-heading {
  margin: 0 0 1.6rem 0 !important;
  font-family: var(--heading-font, var(--main-font, system-ui)) !important;
  font-weight: var(--fw-semibold, 600) !important;
  letter-spacing: .03em !important;

  font-size: clamp(2.4rem, 1.8vw + 1.4rem, 4.2rem) !important;
  line-height: 1.05 !important;
}

html.multipropertyindex .property-result-list h2.media-heading a {
  color: #fff !important;
  text-decoration: none !important;
  font-size: var(--fs-h3) !important;
  margin-top: 1.6rem !important;
  margin-bottom: .8rem;
}

html.multipropertyindex .property-result-list h2.media-heading a:hover {
  text-decoration: underline !important;
}

html.multipropertyindex .amenity-summary-size h4,
html.multipropertyindex .amenity-summary-amenities .h4 {
  margin-top: 0 !important;
  font-size: var(--fs-body);
  margin-bottom: 0 !important;
  font-weight: var(--fw-semibold);

}

/* Meta / amenities: estilo “pills” */
html.multipropertyindex .amenity-summary-size,
html.multipropertyindex .amenity-summary-amenities {
  margin: .8rem 0 0 0 !important;
  line-height: normal !important;
  font-size: clamp(.9rem, .35vw + 1.1rem, 1.4rem) !important;
  opacity: .96 !important;
  color: rgba(255, 255, 255, .75);
}

html.multipropertyindex .amenity-summary-size span {
  background: var(--gom-prop-glass) !important;
  border: 1px solid var(--gom-prop-border) !important;
}

html.multipropertyindex .amenity-summary-amenities .amenity-list-item {
  display: inline-flex !important;
  align-items: center !important;
  gap: .55rem !important;

  padding: .35rem .75rem !important;
  margin: 0 .55rem .55rem 0 !important;

  border: 1px solid var(--gom-prop-border) !important;
  border-radius: 0 !important;

  background: var(--gom-prop-glass) !important;
  -webkit-backdrop-filter: blur(.8rem);
  backdrop-filter: blur(.8rem);

  color: rgba(255, 255, 255, .75);
}

html.multipropertyindex .amenity-summary-amenities .amenity-list-item i {
  opacity: .92 !important;
}

/* Descripción */
html.multipropertyindex .property-result-list .col-sm-8>p {
  margin: 0 0 0 .8rem !important;
  max-width: 78ch !important;
  font-size: clamp(.9rem, .35vw + .9rem, 1.2rem) !important;
  opacity: .96 !important;
}

/* CTA buttons */
html.multipropertyindex .property-result-list .btn-group {
  display: flex !important;
  flex-wrap: nowrap !important;
  gap: .8rem !important;
  width: 100% !important;
  margin: 1.2rem 0 0 0 !important;
}

html.multipropertyindex .property-result-list .btn-group .btn {
  flex: 1 1 0 !important;
  min-width: 0 !important;

  height: 3.6rem !important;
  padding: 0 .8rem !important;

  border: 1px solid rgba(255, 255, 255, .78) !important;
  background: rgba(0, 0, 0, .25) !important;
  color: #fff !important;

  letter-spacing: normal !important;
  text-transform: uppercase !important;
  font-weight: var(--fw-regular, 400) !important;
  font-size: clamp(.9rem, 2.5vw, 1.2rem) !important;

  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;

  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;

  -webkit-backdrop-filter: blur(1rem);
  backdrop-filter: blur(1rem);
}

html.multipropertyindex .property-result-list .btn-group .btn:hover {
  background: rgba(255, 255, 255, .92) !important;
  color: #000 !important;
}

/* =========================
   MOBILE — scroll-snap story mode
   ========================= */
@media (max-width:768px) {

  /* =========================================================
     /properties (mobile) — Single viewport cards + fixed header/drawer
     Scroll container: .property-result-list (not <body>)
     ========================================================= */

  html.multipropertyindex,
  html.multipropertyindex body {
    height: 100svh !important;
    overflow: hidden !important;
  }

  /* If the drawer is enabled, push the page content below the drawer bar */
  html.multipropertyindex.gom-drawer-on #content {
    padding-top: var(--gom-drawer-bar-h, 0px) !important;
  }

  /* The list is the snap/scroll container */
  html.multipropertyindex .property-result-list {
    height: calc(100svh - var(--gom-hdr-h, 9.6rem) - var(--gom-drawer-bar-h, 0px)) !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    scroll-snap-type: y mandatory;
  }

  /* Each card (row) fills the available viewport */
  html.multipropertyindex .property-result-list>.row {
    height: calc(100svh - var(--gom-hdr-h, 9.6rem) - var(--gom-drawer-bar-h, 0px)) !important;
    scroll-snap-align: start;
    scroll-snap-stop: always;
  }

  /* Freeze the list scroll while the site menu is open */
  html.multipropertyindex body.menu-open .property-result-list {
    overflow: hidden !important;
  }

  /* Mobile: show title in card, hide long descriptions */
  html.multipropertyindex .property-result-list h2.media-heading.hidden-xs {
    display: block !important;
  }

  html.multipropertyindex .property-result-list .col-sm-8>p:nth-of-type(n+3) {
    display: none !important;
    padding-bottom: 10% !important;
  }

  /* Small screen: stack the sort button group (when visible) */
  @media (max-width:360px) {
    .multipropertyindex .sort-selector .btn-group {
      display: block !important;
    }

    .multipropertyindex .sort-selector .btn-group .btn {
      display: block !important;
      width: 100% !important;
      text-align: left !important;
    }
  }
}


/* Reduced motion: snap “suave” */
@media (prefers-reduced-motion: reduce) {

  html.multipropertyindex,
  html.multipropertyindex body {
    scroll-snap-type: y proximity;
  }
}


/* Override duro por si gom-pages está ocultando textos */
html.multipropertyindex .property-result-list .col-sm-8 p:not(.btn-group) {
  display: block !important;
}


html.multipropertyindex .property-result-list .col-sm-8>p:nth-of-type(1) {
  display: none !important;
}

/* Opcional premium, recorta a pocas líneas sin romper layout */
html.multipropertyindex .property-result-list .col-sm-8>p {
  overflow: hidden !important;
  display: -webkit-box !important;
  -webkit-box-orient: vertical !important;
  -webkit-line-clamp: 2 !important;
}

/* ============================================================
   PATCH — /properties (multipropertyindex)
   - Header móvil siempre visible
   - Searchbar: centrado vertical + icono calendario
   - Párrafos: ocultar 1, mostrar 2 y 3, nunca ocultar btn-group
   - Botonera: fijada al bottom de la card (full width con paddings)
   - amenity-summary-size: glass pill (incluye #text)
   ============================================================ */

/* 1) MÓVIL: evita auto-hide del header al hacer scroll */
@media (max-width: 768px) {
  html.multipropertyindex #header-bar.header-container {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;

    transform: none !important;
    opacity: 1 !important;
    visibility: visible !important;

    z-index: 9999 !important;
  }
}

/* 2) SEARCH BAR: centra controles e icono calendario */
html.multipropertyindex #search-bar-widget .search-bar-field {
  height: auto !important;
  /* reemplaza el height inválido */
}

html.multipropertyindex #search-bar-widget .search-bar-field .input-group,
html.multipropertyindex #search-bar-widget .search-bar-field .input-group.date {
  display: flex !important;
  align-items: center !important;
  height: 3.2rem !important;
}

html.multipropertyindex #search-bar-widget .search-bar-field .help-block {
  display: none;
}

html.multipropertyindex #search-bar-widget .search-bar-field .form-control,
html.multipropertyindex #ArrivalDate,
html.multipropertyindex #DepartureDate {
  height: 3.2rem !important;
  line-height: 3.2rem !important;
  color: #fff !important;
  /* por si algo lo pisa */
  width: 100% !important;
}

html.multipropertyindex .search-bar .input-group.date .input-group-btn {
  display: flex !important;
  align-items: center !important;
  height: 3.2rem !important;
}

html.multipropertyindex .search-bar .input-group.date .input-group-btn .btn {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  height: 3.2rem !important;
  padding: 0 .9rem !important;
}

html.multipropertyindex i.fa.fa-calendar {
  color: #fff !important;
  /* fuerza el color correcto */
}

/* 3) amenity-summary-size como “glass pill” (cubre también #text del HTML) */
/* Si ya estabas metiendo fondo a spans, lo neutralizamos para que no se “duplique” */
html.multipropertyindex .amenity-summary-size span {
  background: transparent !important;
  border: 0 !important;
  padding: 0 !important;
}

/* 4) PÁRRAFOS: ocultar 1, mostrar 2 y 3; NUNCA ocultar btn-group */
html.multipropertyindex .property-result-list .col-sm-8>p.btn-group {
  display: flex !important;
}

/* Si hay 2 btn-group (a veces el tema duplica uno vacío), nos quedamos con el último */
/* Reglas exactas para descripciones */
html.multipropertyindex .property-result-list .col-sm-8>p:nth-of-type(1):not(.btn-group) {
  display: none !important;
}

html.multipropertyindex .property-result-list .col-sm-8>p:nth-of-type(2):not(.btn-group),
html.multipropertyindex .property-result-list .col-sm-8>p:nth-of-type(3):not(.btn-group) {
  display: block !important;
}

html.multipropertyindex .property-result-list .col-sm-8>p:nth-of-type(2):not(.btn-group) {
  padding-top: 2.4rem
}

html.multipropertyindex .property-result-list .col-sm-8>p:nth-of-type(n+4):not(.btn-group) {
  display: none !important;
}

/* Clamp SOLO para descripciones visibles, nunca para btn-group */
html.multipropertyindex .property-result-list .col-sm-8>p:not(.btn-group) {
  overflow: hidden !important;
  display: -webkit-box !important;
  -webkit-box-orient: vertical !important;
  -webkit-line-clamp: 2 !important;
}

/* 5) Botonera: fija al bottom, full width respetando paddings */
html.multipropertyindex .property-result-list .col-sm-8 {
  padding-bottom: calc(var(--gom-prop-pad-b) + 5.2rem) !important;
  /* reserva espacio */
}

html.multipropertyindex .property-result-list .col-sm-8>p.btn-group:last-of-type {
  position: absolute !important;
  left: var(--gom-prop-pad-x) !important;
  right: var(--gom-prop-pad-x) !important;
  bottom: var(--gom-prop-pad-b) !important;

  margin: 0 !important;
  width: auto !important;
  z-index: 4 !important;
}

/* =========================================================
   FIX: VISIBILIDAD DE PÁRRAFOS + BOTONES (NO TOCAR btn-group)
   Objetivo:
   - Ocultar 1er párrafo descriptivo
   - Mostrar 2do y 3ro
   - Ocultar 4to en adelante
   - NUNCA ocultar p.btn-group
   ========================================================= */

html.multipropertyindex .property-result-list .col-sm-8>p.btn-group {
  display: flex !important;
  -webkit-line-clamp: unset !important;
  overflow: visible !important;
}

/* Oculta SOLO el 1er párrafo si NO es btn-group */
html.multipropertyindex .property-result-list .col-sm-8>p:nth-of-type(1):not(.btn-group) {
  display: none !important;
}

/* Asegura que el 2do y 3ro se vean (siempre que no sean btn-group) */
html.multipropertyindex .property-result-list .col-sm-8>p:nth-of-type(2):not(.btn-group),
html.multipropertyindex .property-result-list .col-sm-8>p:nth-of-type(3):not(.btn-group) {
  display: block !important;
}

/* Oculta del 4to en adelante (solo descriptivos) */
html.multipropertyindex .property-result-list .col-sm-8>p:nth-of-type(n+4):not(.btn-group) {
  display: none !important;
}

/* Clamp solo para párrafos descriptivos (no botones) */
html.multipropertyindex .property-result-list .col-sm-8>p:not(.btn-group) {
  overflow: hidden !important;
  display: -webkit-box !important;
  -webkit-box-orient: vertical !important;
  -webkit-line-clamp: 2 !important;
}

/* Esconde el btn-group vacío sin depender de last-of-type */
html.multipropertyindex .property-result-list .col-sm-8>p.btn-group:empty {
  display: none !important;
}

/* Mejora: si el browser soporta :has, elimina cualquier btn-group sin botones */
@supports selector(p:has(a)) {
  html.multipropertyindex .property-result-list .col-sm-8>p.btn-group:not(:has(a.btn)) {
    display: none !important;
  }
}

/* =========================================================
   FIX: BOTONERA PEGADA AL BORDE INFERIOR DE LA IMAGEN
   ========================================================= */

/* Importante: deja espacio abajo para que el texto no choque con la botonera */
html.multipropertyindex .property-result-list .col-sm-8 {
  padding: 0 var(--gom-prop-pad-x) calc(var(--gom-prop-pad-b) + 5.4rem) var(--gom-prop-pad-x) !important;
}

/* Botonera absoluta al bottom, a todo el ancho respetando paddings */
html.multipropertyindex .property-result-list .col-sm-8>p.btn-group {
  position: absolute !important;
  left: var(--gom-prop-pad-x) !important;
  right: var(--gom-prop-pad-x) !important;
  bottom: var(--gom-prop-pad-b) !important;
  margin: 0 !important;
  z-index: 6 !important;
}

/* Pills para Size (incluye spans existentes y spans inyectados por JS) */
html.multipropertyindex .amenity-summary-size {
  display: flex !important;
  flex-wrap: wrap !important;
  align-items: center !important;
  gap: .55rem !important;
}

/* Quita “bar” accidental si en algún punto lo aplicaste al contenedor */
html.multipropertyindex .amenity-summary-size {
  background: transparent !important;
  border: 0 !important;
}

html.multipropertyindex .amenity-summary-size .gom-pill,
html.multipropertyindex .amenity-summary-size span.gom-pill {
  display: inline-flex !important;
  align-items: center !important;
  padding: .28rem .7rem !important;
  background: var(--gom-prop-glass) !important;
  border: 1px solid var(--gom-prop-border) !important;
  border-radius: 0 !important;
  line-height: 1.2 !important;
  color: rgba(255, 255, 255, .80) !important;
  font-size: var(--fs-xs);
}

html.multipropertyindex #search-bar-widget .input-group,
html.multipropertyindex #search-bar-widget .input-group-btn,
html.multipropertyindex #search-bar-widget .input-group-addon {
  display: flex !important;
  align-items: center !important;
}

html.multipropertyindex #search-bar-widget .input-group-btn .btn,
html.multipropertyindex #search-bar-widget .input-group-addon {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  margin-left: -3rem !important;
}

html.multipropertyindex #search-bar-widget i.fa.fa-calendar {
  line-height: 1 !important;
}

@media (max-width:768px) {

  html.multipropertyindex #header-bar.header-container,
  html.multipropertyindex #header-bar.navbar-fixed-top,
  html.multipropertyindex #header-bar.sticky-top {
    position: fixed !important;
    top: 0 !important;
    transform: translate3d(0, 0, 0) !important;
    transition: none !important;
    z-index: 1005 !important;
  }
}


/* =========================================================
   FINAL PATCH (v5) — fixes requested issues
   ========================================================= */

/* A) Keep mobile header always visible (covers class swaps) */
@media (max-width: 768px) {
  html.multipropertyindex #header-bar {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    transform: translate3d(0, 0, 0) !important;
    transition: none !important;
    opacity: 1 !important;
    visibility: visible !important;
    display: block !important;
    z-index: 9999 !important;
  }
}

/* B) Search widget vertical centering */
html.multipropertyindex #search-bar-widget .form-group {
  margin: 0 !important;
  width: 100%;
}

html.multipropertyindex #search-bar-widget .search-bar-field,
html.multipropertyindex #search-bar-widget .search-bar-button {
  height: 100% !important;
  display: flex !important;
  align-items: center !important;
}

html.multipropertyindex #search-bar-widget .input-group,
html.multipropertyindex #search-bar-widget .input-group.date {
  height: 3.2rem !important;
}

html.multipropertyindex #search-bar-widget .input-group-btn .btn {
  height: 3.2rem !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

html.multipropertyindex #search-bar-widget i.fa.fa-calendar {
  display: inline-block !important;
  line-height: 1 !important;
}

/* C) Dropdown menu same width + premium styling */
html.multipropertyindex .sort-selector {
  position: relative !important;
}

html.multipropertyindex .sort-selector .dropdown-menu {
  min-width: 100% !important;
  width: 100% !important;
  left: 0 !important;
  right: auto !important;

  margin-top: .4rem !important;
  padding: .45rem 0 !important;

  background: var(--gom-prop-glass) !important;
  border: 1px solid rgba(255, 255, 255, .22) !important;
  border-radius: 0 !important;

  -webkit-backdrop-filter: blur(1rem);
  backdrop-filter: blur(1rem);

  z-index: 1000 !important;
}

html.multipropertyindex .sort-selector .dropdown-menu>li>a,
html.multipropertyindex .sort-selector .dropdown-menu .dropdown-item {
  color: rgba(255, 255, 255, .92) !important;
  padding: .65rem 1.2rem !important;
  letter-spacing: .12em !important;
  text-transform: uppercase !important;
  font-size: 1.15rem !important;
}

html.multipropertyindex .sort-selector .dropdown-menu>li>a:hover,
html.multipropertyindex .sort-selector .dropdown-menu>li.active>a,
html.multipropertyindex .sort-selector .dropdown-menu .dropdown-item:hover {
  background: rgba(255, 255, 255, .12) !important;
  color: #fff !important;
}

/* D) Ensure the REAL action buttons are always visible */
html.multipropertyindex .property-result-list .col-sm-8>p.btn-group {
  display: flex !important;
  -webkit-line-clamp: unset !important;
  overflow: visible !important;
}

/* Hide empty duplicates safely (works even if there's whitespace) */
html.multipropertyindex .property-result-list .col-sm-8>p.btn-group {
  min-height: 0 !important;
}

@supports selector(p:has(a)) {
  html.multipropertyindex .property-result-list .col-sm-8>p.btn-group:has(a.btn) {
    display: flex !important;
    max-width: calc(100% - var(--gom-prop-pad-x) - var(--gom-prop-pad-x)) !important;
    padding: 0 !important;
  }

  html.multipropertyindex .property-result-list .col-sm-8>p.btn-group:not(:has(a.btn)) {
    display: none !important;
  }
}

/* E) Amenity summary size: only pills get glass (container stays transparent) */
html.multipropertyindex .amenity-summary-size {
  background: transparent !important;
  border: 0 !important;
  padding: 0 !important;
}

html.multipropertyindex .amenity-summary-size span:not(.gom-pill) {
  background: transparent !important;
  border: 0 !important;
  padding: 0 !important;
}

/* Short heights */
@media (min-width: 769px) and (max-height: 750px) {
  html.multipropertyindex {
    font-size: 56.25%;
  }
}

@media (min-width: 769px) and (max-height: 680px) {
  html.multipropertyindex {
    font-size: 52%;
  }
}

@media (min-width: 769px) and (max-height: 620px) {
  html.multipropertyindex {
    font-size: 50%;
  }
}

/* =========================================================
   DATEPICKER (bootstrap-datepicker) — premium glass theme
   ========================================================= */

html.multipropertyindex .datepicker.datepicker-dropdown.dropdown-menu {
  background: var(--gom-prop-glass) !important;
  border: 1px solid rgba(255, 255, 255, .22) !important;
  border-radius: 0 !important;

  padding: .9rem !important;

  color: #fff !important;
  font-family: var(--main-font, system-ui) !important;
  letter-spacing: .04em;

  -webkit-backdrop-filter: blur(1rem);
  backdrop-filter: blur(1rem);

  box-shadow: 0 18px 60px rgba(0, 0, 0, .55) !important;

  /* Asegura que se vea por encima del HUD */
  z-index: 10060 !important;
}

/* Flechita del dropdown (si aparece) */
html.multipropertyindex .datepicker-dropdown:before {
  border-bottom-color: rgba(255, 255, 255, .22) !important;
}

html.multipropertyindex .datepicker-dropdown:after {
  border-bottom-color: var(--gom-prop-glass) !important;
}

/* Tabla */
html.multipropertyindex .datepicker table.table-condensed {
  width: 100% !important;
  margin: 0 !important;
}

html.multipropertyindex .datepicker th,
html.multipropertyindex .datepicker td {
  text-align: center !important;
  border-radius: 0 !important;
  -webkit-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
}

/* Header (mes/año + prev/next) */
html.multipropertyindex .datepicker th.datepicker-switch {
  font-weight: 700 !important;
  letter-spacing: .14em !important;
  text-transform: uppercase !important;
  padding: .65rem .6rem !important;
}

html.multipropertyindex .datepicker th.prev,
html.multipropertyindex .datepicker th.next {
  width: 3.6rem !important;
  cursor: pointer !important;
  border: 1px solid rgba(255, 255, 255, .18) !important;
  background: rgba(0, 0, 0, .20) !important;
}

html.multipropertyindex .datepicker th.prev:hover,
html.multipropertyindex .datepicker th.next:hover {
  background: rgba(255, 255, 255, .12) !important;
}

/* Días de la semana */
html.multipropertyindex .datepicker th.dow {
  padding: .55rem .4rem !important;
  color: rgba(255, 255, 255, .78) !important;
  font-weight: 600 !important;
  letter-spacing: .08em !important;
  text-transform: uppercase !important;
  font-size: 1.05rem !important;
}

/* Celdas día */
html.multipropertyindex .datepicker td.day {
  width: 3.4rem !important;
  height: 3.2rem !important;
  padding: 0 !important;

  border: 1px solid transparent !important;
  background: transparent !important;

  color: rgba(255, 255, 255, .92) !important;
  cursor: pointer !important;
}

html.multipropertyindex .datepicker td.day:hover {
  background: rgba(255, 255, 255, .12) !important;
  border-color: rgba(255, 255, 255, .16) !important;
}

/* Días fuera del mes */
html.multipropertyindex .datepicker td.old,
html.multipropertyindex .datepicker td.new {
  color: rgba(255, 255, 255, .40) !important;
}

/* Disabled */
html.multipropertyindex .datepicker td.disabled,
html.multipropertyindex .datepicker td.disabled:hover {
  color: rgba(255, 255, 255, .22) !important;
  background: transparent !important;
  border-color: transparent !important;
  cursor: not-allowed !important;
}

/* Today */
html.multipropertyindex .datepicker td.today {
  background: rgba(255, 255, 255, .16) !important;
  border-color: rgba(255, 255, 255, .38) !important;
  color: #fff !important;
}

/* Selected (active) */
html.multipropertyindex .datepicker td.active,
html.multipropertyindex .datepicker td.active:hover {
  background: rgba(255, 255, 255, .92) !important;
  border-color: rgba(255, 255, 255, .92) !important;
  color: #000 !important;
  font-weight: 800 !important;
}

/* Months/Years/Decades/Centuries “tiles” */
html.multipropertyindex .datepicker span.month,
html.multipropertyindex .datepicker span.year,
html.multipropertyindex .datepicker span.decade,
html.multipropertyindex .datepicker span.century {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;

  width: 6.2rem !important;
  height: 3.2rem !important;
  margin: .25rem !important;

  border: 1px solid rgba(255, 255, 255, .16) !important;
  background: rgba(0, 0, 0, .20) !important;

  border-radius: 0 !important;
  cursor: pointer !important;

  color: rgba(255, 255, 255, .92) !important;
  letter-spacing: .08em !important;
  text-transform: uppercase !important;
}

html.multipropertyindex .datepicker span.month:hover,
html.multipropertyindex .datepicker span.year:hover,
html.multipropertyindex .datepicker span.decade:hover,
html.multipropertyindex .datepicker span.century:hover {
  background: rgba(255, 255, 255, .12) !important;
}

/* Focused + Today en grids grandes */
html.multipropertyindex .datepicker span.focused,
html.multipropertyindex .datepicker span.today {
  border-color: rgba(255, 255, 255, .38) !important;
  background: rgba(255, 255, 255, .16) !important;
}

/* Footer (Clear) */
html.multipropertyindex .datepicker tfoot th.clear {
  padding: .75rem 0 .15rem !important;
  cursor: pointer !important;
  color: rgba(255, 255, 255, .78) !important;
  letter-spacing: .14em !important;
  text-transform: uppercase !important;
}

html.multipropertyindex .datepicker tfoot th.clear:hover {
  color: #fff !important;
  text-decoration: underline !important;
}

/* PROPERTIES: Mobile MENU overlay fullscreen + por encima del drawer */
@media (max-width:768px) {
  html.multipropertyindex #header-menu-phone-container.header-menu-container {
    position: fixed !important;
    top: 0;
    /* debajo del header top: var(--gom-hdr-h, 9.6rem) !important;*/
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;

    height: auto !important;
    max-height: none !important;
    overflow-y: auto !important;

    z-index: 9990 !important;
  }

  /* Bootstrap 3: cuando abre, añade .in */
  html.multipropertyindex #header-menu-phone-container.header-menu-container.in {
    display: block !important;
  }

  /* Evitar que el drawer “corte” el overlay del menú */
  html.multipropertyindex body.menu-open .gom-prop-drawer,
  html.multipropertyindex body.menu-open .gom-prop-drawer__panel {
    display: none !important;
  }
}

/* Seguridad: overlay desktop siempre fullscreen */
html.multipropertyindex #gom-desktop-overlay {
  position: fixed !important;
  inset: 0 !important;
  width: 100vw !important;
  height: 100svh !important;
  z-index: 50000 !important;
}

/* Mobile */
/* =========================================================
   /properties (mobile) — recuperar footer sin perder “stories”
   Idea: el scroll vive en #content (incluye cards + footer),
   no dentro de .property-result-list.
   ========================================================= */
@media (max-width:768px) {

  /* Apaga snap en html/body si existía, para que no interfiera */
  html.multipropertyindex,
  html.multipropertyindex body {
    scroll-snap-type: none !important;
  }

  /* Body queda “bloqueado” y el scroll real ocurre en #content */
  html.multipropertyindex body {
    height: 100svh !important;
    overflow: hidden !important;

    /* Importante: no dependas del padding-top inline de OR */
    padding-top: 0 !important;
  }

  /* #content ahora es el viewport scrolleable (y aquí sí está el footer) */
  html.multipropertyindex #content {
    height: 100svh !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    box-sizing: border-box !important;

    /* Reserva espacio visible para header + drawer */
    padding-top: calc(var(--gom-hdr-h, 9.6rem) + var(--gom-drawer-bar-h, 0px)) !important;

    /* Mantiene feeling tipo stories, pero permite llegar al footer */
    scroll-snap-type: y proximity !important;
    scroll-padding-top: calc(var(--gom-hdr-h, 9.6rem) + var(--gom-drawer-bar-h, 0px)) !important;
  }

  /* La lista ya NO debe ser el “scroll container” */
  html.multipropertyindex .property-result-list {
    height: auto !important;
    overflow: visible !important;
  }

  /* Cada card ocupa el viewport útil (menos header + drawer) */
  html.multipropertyindex .property-result-list>.row {
    min-height: calc(100svh - var(--gom-hdr-h, 9.6rem) - var(--gom-drawer-bar-h, 0px)) !important;

    scroll-snap-align: start !important;
    scroll-snap-stop: always !important;
  }

  /* Asegura que el footer no quede “colapsado” por estilos previos */
  html.multipropertyindex footer {
    display: block !important;
  }

  /* Cuando el overlay de Menu abre, también congelamos el scroll del contenido */
  html.multipropertyindex body.menu-open #content {
    overflow: hidden !important;
  }
}

/* =========================================================
   /properties (mobile) — Alinear 1ra card debajo de header + drawer
   Fix: #content.container tiene padding:0 !important (full-bleed),
   así que aquí lo sobreescribimos SOLO en móvil.
   ========================================================= */
@media (max-width:768px) {

  /* Asegura que NO dependemos del padding-top del body (OR a veces lo inyecta inline) */
  html.multipropertyindex body {
    padding-top: 0 !important;
  }

  /* El scroll vive en #content (container), así que aquí va el offset real */
  html.multipropertyindex #content.container {
    padding-top: calc(var(--gom-hdr-h, 9.6rem) + var(--gom-drawer-bar-h, 0px)) !important;
  }

  /* Opcional: evita que algún margen “fantasma” suba el contenido */
  html.multipropertyindex #content.container>.body-content {
    margin-top: 0 !important;
  }
}

html.multipropertyindex .amenity-summary-size,
html.multipropertyindex .amenity-summary-amenities {
  display: none !important;
}

/* =========================================================
   /properties — eliminar espacio generado por &nbsp; (text node)
   Técnica: font-size:0 en el H2 para colapsar el nodo de texto,
   luego restauramos font-size en los hijos reales.
   ========================================================= */
@media (max-width:768px) {

  /* H2 donde viven: (property-count) + (&nbsp;) + (sort-selector) */
  html.multipropertyindex .gom-prop-drawer__panel-inner h2 {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;

    /* mata el “&nbsp;” (nodo de texto) y cualquier whitespace entre items */
    font-size: 0 !important;
    line-height: 1 !important;

    /* opcional: por si hay márgenes raros */
    /*margin: 0 !important;*/
  }

  /* restaurar tipografía en los elementos reales */
  html.multipropertyindex .gom-prop-drawer__panel-inner h2 .property-count {
    font-size: 1.25rem !important;
    /* ajusta a tu gusto */
    line-height: 1.2 !important;
  }

  html.multipropertyindex .gom-prop-drawer__panel-inner h2 .sort-selector {
    font-size: 1.1rem !important;
    /* ajusta a tu gusto */
    line-height: 1.2 !important;
  }

  /* por si el inline style trae offsets raros */
  html.multipropertyindex .gom-prop-drawer__panel-inner h2 .sort-selector {
    margin-top: 0 !important;
  }
}
